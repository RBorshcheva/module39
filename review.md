# Модель базы данных
 ![Модель данных](SF_final.jpg)
## users
**назначение** - хранит данные пользователей
* user_id  - гуид
* user_name - имя
* user_surname - фамилия
* user_login - логин
* user_password - пароль
* user_hash - уникальный хэш для проверки куки
* user_image - картинка пользователя (не используется)
* user_status - текущий статус пользователя (активный/не активный)
* persent - для клиента, используется для рассчёта комиссии при переходе по ссылке 
* wallet - счёт
## programs
**назначение** - хранит данные программ
* program_id - гуид   
* owner - гуид рекламодателя
* program_name - название программы
* description - текстовое описание
* url - конечная ссылка перехода
* price - цена перехода
* image - название картинки
* date_start - дата начала действия программы (не используется)
* date_end - срок окончания действия программы (не используется)
* program_status - статус программы (активный/не активный) (не используется)
## rolesmap
**назначение** - хранит связь роль-пользователь
* role_id - гуид роли
* user_id - гуид пользователя
## subscriptions
**назначение** - хранит данные о подписке вебмастера на программу
* subsription_id - гуид
* user_id - гуид пользователя
* program_id - гуид программы
* link - уникальная ссылка для вебмастера
## roles
**назначение** - хранит роли пользователей
* role_id serial - гуид
* role_name - название роли
## transactions
**назначение** - хранит данные транзакций
**поля:**
* transaction_id - гуид 
* subsription_id - гуид подписки    
* append_date - дата создания
* price - цена перехода
* tax - комисиия   
## frauds
**назначение** - хранит данные отказов
**поля:**
* fraud_id serial - гуид
* program_id - гуид программы
* webmaster_id - гуид вебмастера
* append_date - дата добавления	
# Controller_TransactionCore
**Конструктор**
***входные параметры***
нет
***публичные параметры***
* $model - используемая модель
* $view - используемый конструктор
* $authorised - авторизован ли текущий пользователь (да/нет)
* $userRole - роль текущего пользователя
* $userId - ид текущего пользователся
***вызываемые фукнции***
createTransaction()
***дополнительно***
Для работоспособности требуются параметры:
* $_GET['webm'] - ид вебмастера
* $_GET['prg'] - ид программы
* $_GET['url'] - урл для редиректа
**createTransaction**
***назначение***
создание транзакции и рассчёты вознаграждения при переходе по ссылке вебмастера
***входные параметры***
* $Webmaster - ид вебмастера
* $Program - ид программы
* $URL - урл для редиректа
***выходные параметры***
* нет